// create-collection.js
// 
//  –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—á–∏–π –≤–∞—Ä–∏–∞–Ω—Ç —Å–∫—Ä–∏–ø—Ç–∞ —Å–æ–∑–¥–∞—é—â–µ–≥–æ –Ω–æ–≤—ã–π —Ç–æ–∫–µ–Ω –∫–æ–ª–ª–µ–∫—Ü–∏—é
//
//  !!!!!  –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –≤—Å—Ç–∞–≤—å –≤ –∫–æ–¥ –∞–¥—Ä–µ—Å –±—É–¥—É—â–µ–π –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –≤—ã–±—Ä–∞–Ω–Ω—ã–π –∏–∑ node generate-addresses.js
//     –∏–ª–∏ –º–æ–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é —Å–ª—É—á–∞–π–Ω–æ–≥–æ –Ω–æ–≤–æ–≥–æ –∞–¥—Ä–µ—Å–∞ 
//
//  –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è:  node create-collection.js
//  —á—Ç–æ –±—ã –ø–æ—Ç–æ–º –¥–∞–ª—å—à–µ –ø–µ—Ä–µ–¥–∞—Ç—å –ø—Ä–∞–≤–∞ —Å–º–∞—Ä—Ç –∫–æ–Ω—Ç—Ä–∞–∫—Ç—É –æ—Å—Ç–∞–Ω–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –≥–æ—Ç–æ–≤—É—é –∫–æ–º–∞–Ω–¥—É –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –ø—Ä–∞–≤
//  —Ä—è–¥–æ–º –¥–æ–ª–∂–µ–Ω –ª–µ–∂–∞—Ç—å —Ñ–∞–π–ª my-keypair.json —Å –∫–ª—é—á–æ–º —Ç–æ–≥–æ –∫—Ç–æ —Å–æ–∑–¥–∞—ë—Ç –∫–æ–ª–ª–µ–∫—Ü–∏—é
//
//  –∏–∑ –≤–æ–∑–º–æ–∂–Ω—ã—Ö –º–∏–Ω—É—Å–æ–≤ —Ç–æ —á—Ç–æ —Å–æ–∑–¥–∞—ë—Ç—Å—è –∫–∞–∫–æ–π—Ç–æ –≤—Ä–µ–º–µ–Ω–Ω—ã–π –∫–ª—é—á —É–∫–∞–∑–∞–Ω–Ω—ã–π –≤ Mint Authority –∏ –æ–Ω –∂–µ –≤ Freeze Authority
//  –≥–ø—Ç –≥–æ–≤–æ—Ä–∏—Ç —á—Ç–æ —ç—Ç–æ –Ω–µ –≤–∞–∂–Ω–æ —Ç–∞–∫ –∫–∞–∫ —ç—Ç–æ –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –∞–∫–∫–∞—É–Ω—Ç b –æ–Ω –ø–æ—Ç–æ–º –Ω–µ –∏–º–µ–µ—Ç –Ω–∏–∫–∞–∫–∏—Ö –ø—Ä–∞–≤, –Ω–æ —Ç–∏–ø–∞ –ø—Ä–∏ –∂–µ–ª–∞–Ω–∏–∏ –º–æ–∂–Ω–æ –ø–æ–ø—Ä–æ–±—ã–≤–∞—Ç—å –µ–≥–æ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–∞–º–æ–º—É
//
//  –∏ –µ—â—ë –ø—Ä–∏ –∂–µ–ª–∞–Ω–∏–∏ –º–æ–∂–Ω–æ –Ω–∞–≤–µ—Ä–Ω–æ–µ —Å–¥–µ–ª–∞—Ç—å —á—Ç–æ –±—ã –∞–¥—Ä–µ—Å –±—É–¥—É—â–µ–≥–æ —Ç–æ–∫–µ–Ω–∞ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–ª—Å—è –∑–∞—Ä–∞–Ω–µ–µ

import { createUmi } from '@metaplex-foundation/umi-bundle-defaults';
import {
  createSignerFromKeypair,
  signerIdentity,
  generateSigner
} from '@metaplex-foundation/umi';
import { mplTokenMetadata, createNft } from '@metaplex-foundation/mpl-token-metadata';
import { readFileSync } from 'fs';

// –ó–∞–≥—Ä—É–∂–∞–µ–º keypair –∏–∑ —Ñ–∞–π–ª–∞
const secret = JSON.parse(readFileSync('my-keypair.json', 'utf8'));                // üîë –ö–æ—à–µ–ª—ë–∫, —Å –∫–æ—Ç–æ—Ä–æ–≥–æ –≤—Å—ë –¥–µ–ª–∞–µ—Ç—Å—è

// –°–æ–∑–¥–∞—ë–º Umi-–∫–ª–∏–µ–Ω—Ç
const umi = createUmi('https://api.devnet.solana.com');                             // üåê –°–µ—Ç—å ‚Äî Devnet

// –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º keypair
const keypair = umi.eddsa.createKeypairFromSecretKey(new Uint8Array(secret));

// –ü–æ–¥–∫–ª—é—á–∞–µ–º –ø–ª–∞–≥–∏–Ω—ã
umi
  .use(signerIdentity(createSignerFromKeypair(umi, keypair)))
  .use(mplTokenMetadata());

// -----------------------   –∏–ª–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º –Ω–æ–≤—ã–π mint-–∞–¥—Ä–µ—Å —ç—Ç–æ–π –∫–æ–º–∞–Ω–¥–æ–π    ----------------------------------------------------------
// const mint = generateSigner(umi);  // –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º mint-–∞–¥—Ä–µ—Å
// -----------------------   –∏–ª–∏ –≤—Å—Ç–∞–≤–ª—è–µ–º —Å—é–¥–∞ –∑–∞—Ä–∞–Ω–µ–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∏ –≤—ã–±—Ä–∞–Ω–Ω—ã–π –∫–ª—é—á –∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ node generate-addresses.js   ---

// ‚úçÔ∏è –ó–∞—Ä–∞–Ω–µ–µ –≤—ã–±—Ä–∞–Ω–Ω—ã–π mint-—Å–µ–∫—Ä–µ—Ç –≤ —Ñ–æ—Ä–º–∞—Ç–µ —Ç–∏–ø–∞
// const mintSecret = [
//   // –í—Å—Ç–∞–≤—å—Ç–µ —Å—é–¥–∞ 64 –±–∞–π—Ç–∞ —Å–µ–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞ –æ—Ç –ø–æ–Ω—Ä–∞–≤–∏–≤—à–µ–≥–æ—Å—è mint-–∞–¥—Ä–µ—Å–∞
// ];

const mintSecret = [

  151,47,238,126,55,59,2,61,253,238,78,135,182,130,236,188,
  122,183,51,216,138,56,214,135,210,165,194,65,7,175,81,120,
  6,149,142,213,206,67,72,139,147,16,202,244,60,15,164,79,
  183,203,161,82,110,236,209,73,188,161,228,169,133,253,88,5,
];



if (mintSecret.length !== 64) {
  throw new Error('‚ùå –ù–µ —É–∫–∞–∑–∞–Ω –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á –¥–ª—è mint-–∞–¥—Ä–µ—Å–∞!');
}

const mintKeypair = umi.eddsa.createKeypairFromSecretKey(new Uint8Array(mintSecret));
const mint = createSignerFromKeypair(umi, mintKeypair); 
 //------------------------------------------------------------------------------------------------------------------------------------


// 1Ô∏è‚É£ –°–æ–∑–¥–∞—ë–º NFT —Å —Ñ–ª–∞–≥–æ–º isCollection
await createNft(umi, {
  mint,
  name: '–ö–æ–ª–ª–µ–∫—Ü–∏—è',                                                    // üßæ –ò–º—è –∫–æ–ª–ª–µ–∫—Ü–∏–∏ (–¥–æ 32 –±–∞–π—Ç –≤ UTF-8)
  symbol: 'PROMISE',                                                    // üí† –°–∏–º–≤–æ–ª (–¥–æ 10 —Å–∏–º–≤–æ–ª–æ–≤ ASCII) ( –Ω–∞–ø—Ä–∏–º–µ—Ä BTC ‚Äî —É –±–∏—Ç–∫–æ–∏–Ω–∞ –∏ —Ç.–ø.) 
  uri: 'https://shineup.me/nft/collection.json',                        // üìÑ –°—Å—ã–ª–∫–∞ –Ω–∞ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
  sellerFeeBasisPoints: 0,                                              // üí∏ –†–æ—è–ª—Ç–∏
  isCollection: true,                                                   // ‚úÖ –≠—Ç–æ –∫–æ–ª–ª–µ–∫—Ü–∏—è
  collectionIsSized: true                                              // üßÆ –ü–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —á–∏—Å–ª–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏
}).sendAndConfirm(umi);



console.log('‚úÖ –ö–æ–ª–ª–µ–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞!');
console.log('ü™ô Mint address: ', mint.publicKey.toString());
console.log('');
console.log('üìÆ –ü—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–ª–ª–µ–∫—Ü–∏–µ–π : ', keypair.publicKey.toString());
console.log('');
console.log(`üîé –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∫–æ–ª–ª–µ–∫—Ü–∏—é: https://explorer.solana.com/address/${mint.publicKey.toString()}?cluster=devnet`);
console.log('');

const newUpdateAuthority = '5dFcWDNp42Xn9Vv4oDMJzM4obBJ8hvDuAtPX54fT5L3t';  // üìç –ù–æ–≤—ã–π –±—É–¥—É—â–∏–π –≤–ª–∞–¥–µ–ª–µ—Ü –∫–æ–ª–ª–µ–∫—Ü–∏–∏ (–∞–¥—Ä–µ—Å —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞)

console.log('üì¶ –ì–æ—Ç–æ–≤–∞—è –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –ø—Ä–∞–≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ —á–µ—Ä–µ–∑ Metaboss:');
console.log('');
console.log(`metaboss set update-authority \\`);
console.log(`  --keypair ./my-keypair.json \\`);
console.log(`  --account ${mint.publicKey.toString()} \\`);
console.log(`  --new-update-authority ${newUpdateAuthority}`);
